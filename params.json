{"name":"Rails-dev-box-runs-oracle","tagline":"A virtual machine for Ruby on Rails core development","body":"# A Virtual Machine for Ruby on Rails Core Development with Oracle Database\r\n\r\n## Introduction\r\n\r\nThis project provides Oracle Database support on top of rails-dev-box. \r\n\r\n## Requirements\r\n\r\n* [VirtualBox](https://www.virtualbox.org)\r\n\r\n* [Vagrant 1.1+](http://vagrantup.com)\r\n\r\n* VirtualBox needs support for 64-bit guests\r\n\r\n## How To Build The Virtual Machine\r\n\r\nBuilding the virtual machine is this easy:\r\n\r\n* Download [Oracle Database 11g Express Edition](http://www.oracle.com/technetwork/products/express-edition/overview/index.html) for Linux x64. The file name is `oracle-xe-11.2.0-1.0.x86_64.rpm.zip`.\r\n\r\n```sh\r\n    host $ git clone https://github.com/yahonda/rails-dev-box-runs-oracle.git\r\n    host $ cp oracle-xe-11.2.0-1.0.x86_64.rpm.zip rails-dev-box-runs-oracle/puppet/modules/oracle/files/.\r\n    host $ cd rails-dev-box-runs-oracle\r\n    host $ vagrant up\r\n```\r\n\r\nThat's it.\r\n\r\nAfter the installation has finished, you can access the virtual machine with:\r\n\r\n```sh\r\n    host $ vagrant ssh\r\n    Welcome to Ubuntu 12.04 LTS (GNU/Linux 3.2.0-23-generic x86_64)\r\n    ...\r\n    vagrant@rails-dev-box:~$ sqlplus system/manager@localhost/XE\r\n```\r\n\r\nPort 3000 in the host computer is forwarded to port 3000 in the virtual machine. Thus, applications running in the virtual machine can be accessed via localhost:3000 in the host computer. \r\n\r\nSimilarly, Oracle's default network listener port 1521 in the host computer is forwarded to port 1521 in the virtual machine. Oracle tools in the host computer can connect to the database in the virtual machine:\r\n\r\n```sh\r\n    host $ sqlplus system/manager@localhost/XE\r\n```\r\n\r\n## What's In The Box\r\n\r\n* Everthing in [rails-dev-box](https://github.com/rails/rails-dev-box)\r\n\r\n* Oracle Database 11g Express Edition\r\n\r\n## How to clone Rails repositories and execute unit tests\r\n\r\nJust clone your Rails fork in the very directory of the Rails development box in the host computer:\r\n\r\n    host $ ls\r\n    README.md   Vagrantfile puppet\r\n    host $ git clone -b 3-2-stable https://github.com/rails/rails.git rails\r\n\r\nVagrant mounts that very directory as _/vagrant_ within the virtual machine:\r\n\r\n    vagrant@rails-dev-box:~$ ls /vagrant\r\n    puppet  rails  README.md  Vagrantfile\r\n\r\n## Execute ActiveRecord 3.2 unit tests with Oracle enhanced adapter\r\n\r\nJust execute as described steps below. \r\n\r\n    vagrant@rails-dev-box:~$ cd /vagrant/rails/activerecord\r\n    vagrant@rails-dev-box:/vagrant/rails/activerecord$ bundle\r\n    vagrant@rails-dev-box:/vagrant/rails/activerecord$ rake test_oracle\r\n\r\n## How to clone the Oracle enhanced repository and execute unit tests\r\n\r\nClone the oracle-enhanced repository as you do Rails.\r\n\r\n    host $ ls\r\n    README.md   Vagrantfile puppet rails\r\n\r\n    host $ git clone https://github.com/rsim/oracle-enhanced.git\r\n\r\n    host $ ls\r\n    oracle-enhanced README.md   Vagrantfile puppet rails\r\n\r\n## Execute Oracle enhanced adapter unit tests with Rails 3.2.x\r\n\r\nJust execute as described steps below. \r\n\r\n    vagrant@rails-dev-box:~$ cd /vagrant/oracle-enhanced\r\n    vagrant@rails-dev-box:/vagrant/oracle-enhanced $ export RAILS_GEM_VERSION=3.2.14\r\n    vagrant@rails-dev-box:/vagrant/oracle-enhanced$ bundle\r\n    vagrant@rails-dev-box:/vagrant/oracle-enhanced$ rspec\r\n\r\n## How about Rails 4.0?\r\n\r\nCompared with Rails 3.2 tests, Rails 4 still have some failures. This is the reason why rails-dev-box-runs-oracle is there. Here are steps to execute unit tests with Rails 4. Enjoy!\r\n\r\n## How to clone Rails repositories and execute unit tests\r\n\r\nJust clone your Rails fork in the very directory of the Rails development box in the host computer:\r\n\r\n    host $ ls\r\n    README.md   Vagrantfile puppet\r\n    host $ git clone -b 4-0-stable https://github.com/rails/rails.git rails\r\n    host $ git clone https://github.com/rsim/oracle-enhanced.git\r\n\r\n## Execute ActiveRecord 4 unit tests with Oracle enhanced adapter\r\n\r\nJust execute as described steps below. \r\n\r\n    vagrant@rails-dev-box:~$ bundle config local.activerecord-oracle_enhanced-adapter /vagrant/oracle-enhanced\r\n    vagrant@rails-dev-box:~$ bundle config disable_local_branch_check true\r\n    vagrant@rails-dev-box:~$ cd /vagrant/oracle-enhanced\r\n    vagrant@rails-dev-box:/vagrant/oracle-enhanced$ git checkout rails4\r\n    vagrant@rails-dev-box:/vagrant/oracle-enhanced$ cd /vagrant/rails/activerecord\r\n    vagrant@rails-dev-box:/vagrant/rails/activerecord$ bundle\r\n    vagrant@rails-dev-box:/vagrant/rails/activerecord$ rake test_oracle\r\n\r\n## How to execute Oracle enhanced adapter unit tests with Rails 4.0.0\r\n\r\nJust execute as described steps below. \r\n\r\n    vagrant@rails-dev-box:~$ cd /vagrant/oracle-enhanced\r\n    vagrant@rails-dev-box:/vagrant/oracle-enhanced $ export RAILS_GEM_VERSION=4.0.0\r\n    vagrant@rails-dev-box:/vagrant/oracle-enhanced$ bundle\r\n    vagrant@rails-dev-box:/vagrant/oracle-enhanced$ rspec\r\n\r\n## Notes\r\n\r\nIf your host is behind a firewall and 'vagrant up' gets errors running apt-get or installing RVM, then create ~/.vagrant.d/Vagrantfile to update the virtual machine's proxy settings:\r\n\r\n```sh\r\n    # ~/.vagrant.d/Vagrantfile\r\n    Vagrant.configure('2') do |config|\r\n      config.vm.provision :shell, :inline => \"echo 'Acquire::http::proxy \\\"http://proxy.example.com:80/\\\";' >> /etc/apt/apt.conf\"\r\n      config.vm.provision :shell, :inline => \"echo 'Acquire::https::proxy \\\"http://proxy.example.com:80/\\\";' >> /etc/apt/apt.conf\"\r\n      config.vm.provision :shell, :inline => \"echo 'export http_proxy=http://proxy.example.com:80/' > /etc/profile.d/vagrant_proxy.sh\"\r\n      config.vm.provision :shell, :inline => \"echo 'export https_proxy=http://proxy.example.com:80/' >> /etc/profile.d/vagrant_proxy.sh\"\r\n    end\r\n```\r\n\r\nChange the proxy name and port to be your network's proxy.\r\n\r\n## Acknowledgements\r\n\r\nThis project is based on [rails-dev-box](https://github.com/rails/rails-dev-box) \r\nand [vagrant-ubuntu-oracle-xe](https://github.com/hilverd/vagrant-ubuntu-oracle-xe).\r\n\r\nThanks to everyone who contributes to these projects.\r\n\r\n## Questions\r\n\r\nPlease email me yasuo.honda@gmail.com\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}